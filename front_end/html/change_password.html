<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cuea Assistant Bot</title>

    <link rel="stylesheet" href="/front_end/login.css">

    <!-- Google Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap"
          rel="stylesheet">
</head>
<body>
<div class="container">
    <form method="POST" id="form" onsubmit="return validatePassword()">
        <h1>Reset Password</h1>

        <div class="form-group">
            <label for="old_password">Old Password:</label>
            <input class="form-control" type="password" id="old_password" name="new_password">
        </div>

        <div class="form-group">
            <label for="new_password">New Password:</label>
            <input class="form-control" type="password" id="new_password" name="new_password">
        </div>

        <div class="form-group">
            <label for="confirm_new_password">Confirm New Password:</label>
            <input class="form-control" type="password" id="confirm_new_password" name="confirm_new_password">
        </div>


        <div class="form-group">
            <input type="checkbox" id="viewPass" onchange="return togglePasswordVisibility()">
            <label for="viewPass">Make Password Visible</label>
        </div>

        <script>
            function togglePasswordVisibility() {
                const oldPasswordField = document.getElementById("old_password");
                const newPasswordField = document.getElementById("new_password");
                const confirmNewPasswordField = document.getElementById("confirm_new_password");
                const toggleButton = document.querySelector(".toggle-button");

                if (newPasswordField.type === "password" && confirmNewPasswordField.type === "password" && oldPasswordField.type === "password") {
                    newPasswordField.type = "text";
                    confirmNewPasswordField.type = "text";
                    oldPasswordField.type = "text";
                    toggleButton.textContent = "Hide";
                } else {
                    newPasswordField.type = "password";
                    confirmNewPasswordField.type = "password";
                    oldPasswordField.type = "password";
                    toggleButton.textContent = "Show";
                }
            }

            function validatePassword() {
                const oldPasswordField = document.getElementById("old_password");
                const newPasswordField = document.getElementById("new_password");
                const confirmNewPasswordField = document.getElementById("confirm_new_password");

                const pattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,20}$/;

                if (oldPasswordField.value === "") {
                    alert("Old password cannot be empty");
                    return false;
                }

                if (newPasswordField.value === "") {
                    alert("New password cannot be empty");
                    return false;
                }

                if (confirmNewPasswordField.value === "") {
                    alert("Confirm new password cannot be empty");
                    return false;
                }

                if (oldPasswordField === newPasswordField) {
                    alert("New password cannot be the same as old password");
                    return false;
                }

                if (newPasswordField.value !== confirmNewPasswordField.value) {
                    alert("Passwords do not match");
                    return false;
                }

                if (!pattern.test(newPasswordField.value)) {
                    alert("Password must be between 8 to 20 characters long, contain at least one uppercase letter, one lowercase letter, one digit and one special character");
                    return false;
                }

                return true;

            }
        </script>

        <input type="submit" class="form-button" value="Reset">
    </form>
</div>
</body>
</html>